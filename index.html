<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Profile Manager</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f4f6f9; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
nav button { margin-right: 10px; padding: 8px 15px; border: none; background: #4CAF50; color: white; cursor: pointer; border-radius: 5px; }
nav button:hover { background: #45a049; }
input, select, button { padding: 8px; margin: 5px 0; width: 100%; }
table { width: 100%; border-collapse: collapse; margin-top: 15px; }
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background: #4CAF50; color: white; }
.delete-btn { background: red; color: white; border: none; padding: 5px 10px; cursor: pointer; }
.delete-btn:hover { background: darkred; }
.hidden { display: none; }
</style>
</head>
<body>

<div class="container">
<h1>Student Profile Manager</h1>
<nav>
  <button onclick="showSection('addSection')">Add Student</button>
  <button onclick="showSection('viewSection')">View All</button>
  <button onclick="showSection('filterSection')">Branch + Year + Sem Filter</button>
</nav>

<!-- Add Student -->
<div id="addSection">
  <h2>Add Student</h2>
  <input type="text" id="name" placeholder="Name">
  <input type="number" id="age" placeholder="Age">
  <input type="email" id="email" placeholder="Email">
  <input type="text" id="phone" placeholder="Phone">
  
  <select id="branch">
    <option value="">Select Branch</option>
    <option>Computer Science</option>
    <option>Civil</option>
    <option>Mechanical</option>
    <option>E&E</option>
    <option>EEE</option>
  </select>
  
  <select id="year">
    <option value="">Select Year</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
  </select>
  
  <select id="sem">
    <option value="">Select Semester</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
    <option>6</option>
  </select>
  
  <button onclick="addStudent()">Add Student</button>
</div>

<!-- View All Students -->
<div id="viewSection" class="hidden">
  <h2>All Students</h2>
  <button onclick="window.print()">Print</button>
  <table>
    <thead>
      <tr>
        <th>Name</th><th>Age</th><th>Email</th><th>Phone</th>
        <th>Branch</th><th>Year</th><th>Sem</th><th>Action</th>
      </tr>
    </thead>
    <tbody id="studentList"></tbody>
  </table>
</div>

<!-- Combined Filter -->
<div id="filterSection" class="hidden">
  <h2>Filter Students</h2>
  <select id="branchFilter">
    <option value="">Select Branch</option>
    <option>Computer Science</option>
    <option>Civil</option>
    <option>Mechanical</option>
    <option>E&E</option>
    <option>EEE</option>
  </select>
  <select id="yearFilter">
    <option value="">Select Year</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
  </select>
  <select id="semFilter">
    <option value="">Select Semester</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
    <option>6</option>
  </select>
  <button onclick="filterStudents()">Filter</button>
  
  <table>
    <thead>
      <tr>
        <th>Name</th><th>Age</th><th>Email</th><th>Phone</th>
        <th>Branch</th><th>Year</th><th>Sem</th>
      </tr>
    </thead>
    <tbody id="filterList"></tbody>
  </table>
</div>
</div>

<script>
function showSection(sectionId) {
  document.querySelectorAll('.container > div').forEach(div => {
    if (div.id && div.tagName !== "NAV") {
      div.classList.add("hidden");
    }
  });
  document.getElementById(sectionId).classList.remove("hidden");
  if (sectionId === 'viewSection') loadStudents();
}

function addStudent() {
  let student = {
    id: Date.now(),
    name: document.getElementById("name").value.trim(),
    age: document.getElementById("age").value.trim(),
    email: document.getElementById("email").value.trim(),
    phone: document.getElementById("phone").value.trim(),
    branch: document.getElementById("branch").value,
    year: document.getElementById("year").value,
    sem: document.getElementById("sem").value
  };
  if (!student.name || !student.age || !student.email || !student.phone || !student.branch || !student.year || !student.sem) {
    alert("Please fill all fields");
    return;
  }
  let students = JSON.parse(localStorage.getItem("students")) || [];
  students.push(student);
  localStorage.setItem("students", JSON.stringify(students));
  alert("Student Added!");
  document.querySelectorAll("#addSection input, #addSection select").forEach(el => el.value = "");
  showSection('viewSection'); // Auto-switch to view
}

function loadStudents() {
  let students = JSON.parse(localStorage.getItem("students")) || [];
  let table = document.getElementById("studentList");
  table.innerHTML = "";
  students.forEach(s => {
    table.innerHTML += `<tr>
      <td>${s.name}</td>
      <td>${s.age}</td>
      <td>${s.email}</td>
      <td>${s.phone}</td>
      <td>${s.branch}</td>
      <td>${s.year}</td>
      <td>${s.sem}</td>
      <td><button class="delete-btn" onclick="deleteStudent(${s.id})">Delete</button></td>
    </tr>`;
  });
}

function deleteStudent(id) {
  let students = JSON.parse(localStorage.getItem("students")) || [];
  students = students.filter(s => s.id !== id);
  localStorage.setItem("students", JSON.stringify(students));
  loadStudents();
}

function filterStudents() {
  let branch = document.getElementById("branchFilter").value;
  let year = document.getElementById("yearFilter").value;
  let sem = document.getElementById("semFilter").value;
  
  let students = JSON.parse(localStorage.getItem("students")) || [];
  let filtered = students.filter(s => 
    (branch ? s.branch === branch : true) &&
    (year ? s.year === year : true) &&
    (sem ? s.sem === sem : true)
  );
  
  let table = document.getElementById("filterList");
  table.innerHTML = "";
  filtered.forEach(s => {
    table.innerHTML += `<tr>
      <td>${s.name}</td>
      <td>${s.age}</td>
      <td>${s.email}</td>
      <td>${s.phone}</td>
      <td>${s.branch}</td>
      <td>${s.year}</td>
      <td>${s.sem}</td>
    </tr>`;
  });
}
</script>

</body>
</html>
